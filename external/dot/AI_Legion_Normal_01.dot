digraph {
	fixedsize=true;
	concentrate=true;
	node [shape=rect margin="0.25,0.125"];
	start [shape=invhouse];

	node [style=filled fillcolor="#FFEEBB"]; # cond
	cond1 [tooltip="!check?type=buff&kind=target&buff=Effect_MP_Legion_N_2,random?op=eless&value=40"]; # has not Effect_MP_Legion_N_2 in target, 40% chance
	cond2 [tooltip="check?type=buff&kind=target&buff=Effect_MP_Centurion_N_2"]; # has Effect_MP_Centurion_N_2 in target
	cond2_1 [tooltip="check?type=buff&kind=target&buff=Effect_MP_Centurion_N_2"]; # has Effect_MP_Centurion_N_2 in target
	cond3 [tooltip="check?type=skill&slot=1&kind=usable,random?op=eless&value=90"]; # active 1 usable, 90% chance
	cond4 [tooltip="check?type=buff&kind=target&buff=Effect_MP_Centurion_N_2,!check?type=buff&kind=target&buff=Effect_MP_Legion_N_2"]; # has Effect_MP_Centurion_N_2 buff in target, has not Effect_MP_Legion_N_2 buff in target
	cond4_1 [tooltip="!check?type=buff&kind=target&buff=Effect_MP_Centurion_N_2,!check?type=buff&kind=target&buff=Effect_MP_Legion_N_2"]; # has not Effect_MP_Centurion_N_2 buff in target, has not Effect_MP_Legion_N_2 buff in target
	cond4_2 [tooltip="check?type=buff&kind=target&buff=Effect_MP_Legion_N_2"]; # has not Effect_MP_Legion_N_2 buff in target
	skill_usable2 [tooltip="check?type=skill&slot=2&kind=usable"]; # active 2 usable
	skill_usable2_1 [tooltip="check?type=skill&slot=2&kind=usable"]; # active 2 usable
	usable_cell1 [tooltip="check?type=skill&slot=1&kind=movable"]; # is cell exists that can use active 1
	usable_cell2 [tooltip="check?type=skill&slot=2&kind=movable"]; # is cell exists that can use active 2

	node [fillcolor="#BBCCFF"];
	skill1 [tooltip="skill?slot=1&target=buff&buff=Effect_MP_Centurion_N_2"]; # use active 1 to has Effect_MP_Centurion_N_2 buff
	skill1_1 [tooltip="skill?slot=1&target=flying"]; # use active 1 to flying first
	skill2 [tooltip="skill?slot=2&target=buff&buff=Effect_MP_Centurion_N_2"]; # use active 2 to has Effect_MP_Centurion_N_2 buff
	skill2_1 [tooltip="skill?slot=2&target=flying"]; # use active 2 to flying first
	skill2_2 [tooltip="skill?slot=2&target=random"]; # use active 2 to random

	node [fillcolor="#7788aa"];
	move1 [tooltip="move?slot=1"]; # move to cell that can use active 1
	move2 [tooltip="move?slot=2"]; # move to cell that can use active 2
	wait [tooltip="wait" fillcolor="#999999"]; # wait

	start -> cond1;

	cond1 -> skill_usable2 [label="y"];
	cond1 -> cond3 [label="n"];

	skill_usable2 -> cond2 [label="y"];
	skill_usable2 -> cond3 [label="n"];

	cond2 -> skill2 [label="y"];
	cond2 -> skill2_1 [label="n"];

	cond3 -> cond2_1 [label="y"];
	cond3 -> skill_usable2_1 [label="n"];

	cond2_1 -> skill1 [label="y"];
	cond2_1 -> skill1_1 [label="n"];

	skill_usable2_1 -> cond4 [label="y"];
	skill_usable2_1 -> usable_cell2 [label="n"];

	cond4 -> skill2 [label="y"];
	cond4 -> cond4_1 [label="n"];

	cond4_1 -> skill2_1 [label="y"];
	cond4_1 -> cond4_2 [label="n"];

	cond4_2 -> skill2_2 [label="y"];
	cond4_2 -> usable_cell2 [label="n"];

	usable_cell2 -> move2 [label="y"];
	usable_cell2 -> usable_cell1 [label="n"];

	usable_cell1 -> move1 [label="y"];
	usable_cell1 -> wait [label="n"];
}